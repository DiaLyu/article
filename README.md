# Тип работы: статья
# Тема: «О возможности выявления связей между словами в художественном произведении»

## Введение
Люди стремятся к полной автоматизации всех процессов, чтобы максимально облегчить жизнь. Это касается и текстов. В них хранится огромное количество информации, на изучение которой необходим большой объем времени. На данный момент существует много методов, алгоритмов, которые позволяют решать задачи такого рода, как интеллектуальный анализ данных, поиск информации, её извлечение, обработка текста на естественном языке, но работа их неидеальна. Дело в том, что естественный язык (в особенности это касается неструктурированных текстов) характеризуется высокой степенью неоднозначности, контекстуальной зависимостью и нечеткостью, связанная с обменом информацией в процессе постоянно изменяющейся практической деятельности человека, что создает сложность в решении задач компьютерной лингвистики. Эти задачи требуют использования огромного объема данных и их обработки. Наконец, каждый язык имеет свои особенности, что создает трудности в создании единого алгоритма. Поэтому работа над улучшением алгоритмов компьютерной лингвистики идет в полном темпе, в том числе над задачей выявления связей между словами (или словосочетаниями).

## Обзор алгоритмов выявления связей

Онтология является одним из часто упоминаемых понятий, когда дело касается извлечения знаний из текста. Она описывает основные концепции предметной области и определяет отношения между ними. Как пишет Ермаков Е.А., для систем извлечения знаний из текста онтология имеет дело «в слабом смысле» с относительно бедной контекстуальной, но чрезвычайно богатой лингвистической составляющей [1]. Онтология строится на основе профессиональных знаний предметной области, которые включают базовые понятия-концепты, классификации базовых понятий с формированием абстрактных понятий и определение возможных отношений между ними. Также соотносят все термины предметной области с понятиями в контекстуальной схеме (расширение словаря понятий, если онтология предполагает родо-видовые связи между понятиями одного класса, а также формирование словаря возможных терминов-значений для каждого понятия). И напоследок, подписывают синонимы к понятиям, и расписываются лексико-грамматические конструкции. То есть в основном метод онтологий составляется для работы с определенной предметной областью и требует работы со специалистами в этом, не универсальный, но зато является довольно точным.

Алгоритм выявления связей между именованными сущностями был предложен Пантелеевым М.Ф. и Самаревым Р.С., который полагался на базу знаний DBpedia. [2] Вначале алгоритм выявляет поверхностные формы (ключевые слова) в предложении, которым могут соответствовать сущности базы знаний. Далее осуществляется поиск сущностей-кандидатов в базе знаний, отвечающие поверхностным формам. Для определения связей между сущностями в DBpedia для каждой поверхностной формы и связанной с ней сущностями-кандидатами вычисляется их многомерное векторное представление, после чего для каждой поверхностной формы выбирается описывающая её сущность-кандидат на основе минимальности расстояния между их векторными представлениями. Авторы последние действия изменили, модифицировав алгоритм. В итоге полученные связи агрегировали в цепочки, и провели взвешивание. 

Курушин Д.С., Соболева О.В., Вяткин Д.С. рассматривают способ представления структуры текста в виде денотатного графа (денотат - объекты и явления реальной действительности, отраженные в мышлении и выраженные в тексте соответствующими языковыми средствами) [3]. При построении денотатного графа Новикова А.И. выделяются "ключевые" элементы текста, определение элементов, принадлежащих к верхним уровням текста (подтемы), субподтем. Далее преобразование таблицы связей в граф, где вершина первого уровня - имя главного предмета, вершины второго уровня - имена подтем, третий уровень - субподтемы, а ребра - связи между вершинами. Последним этапов алгоритма определяются соотношения денотатов. В результате работы авторы пришли к выводу, что метод денотативного анализа текста имеет большое прикладное значение в процессе формализации текста, и выяснили, что для обучения системы необходимо предоставлять денотатному графу полную информацию о предметной области.

В работе [4] Курушин Д.С., Леонов Е.Р. и Соболева О.В. продолжают заниматься с денотатным графом, но с подходом применения статистических методов выделения коллакаций для построения содержательной модели гепертекста (способ организации текстовой информации, внутри которой установлены смысловые связи между её различными фрагментами). В алгоритме реализуется вход в гипертекстовую систему по интересующему понятию, получение текста описания этого понятия и выделение из текста множества коллокаций. Если для коллокации существует соответствующее ей текстовое описание Ti, то строится денотатная пара. Процесс повторяется рекурсивно до тех пор, пока не будет достигнуты состояние, когда новые денотатные пары не образуются, или предельный уровень глубины рекурсии. Денотатные пары объединяются в граф. Если определение коллокации отсутствует в гипертексте, то связь не строится. 

Выявление связей между термином и объектом в алгоритме, предложенном Дмитриевым А.С., Соловьевым И.С., Орловой Ю.А., Розалиевым В.Л. и Константиновым В.М., получается на основе использования машинного обучения, в котором на принятие решения алгоритма влияют такие признаки, как морфологический разбор слов, их позиция в тексте и предложении, а также контекстная информация. [4] В этом алгоритме результатом выступает показатель вероятности взаимосвязи между термином и объектом. 

## Выявление связей между именованными сущностями в художественном произведении

Автору данной статьи необходимо было произвести автоматизацию построения маршрутов героев книги, что означает необходимость поиска в тексте именованных сущностей таких как, имен людей и названий населенных пунктов, а также выявления между ними связей, что в итоге позволит построить маршрут. 
Связанные по смыслу и грамматически слова являются словосочетанием, соединенные на основе синтаксической связи, в которой одно слово является главным, другое – зависимым: работать (как?) усердно, банка (какая?) стеклянная. Группа словосочетаний образуют логически верное предложение (Рисунок 1).
 
![Img syntax](/img/img1.png)
Рисунок 1 – синтаксический разбор предложения

Следовательно, чтобы найти связь между героем и местом, которое он посещает, необходимо произвести синтаксический разбор предложения.

Маршрут – это движение от одной точки к другой. Поэтому связью между именем и городом будут глаголы, обозначающие перемещение, к примеру: приехать, возвратиться, идти, улететь и т.д., или существительные: возвращение, приезд. В этом случае необходимо установить именно факт выполнения этих действий. Предложения «В конце письма она извещала его, что на днях приедет в Петербург из-за границы.», «– Вы поезжайте в Петербург; это лучше.» говорят о будущих планах, намерениях, поэтому глаголы должны быть в прошедшем времени или настоящем, обозначающие, что герой точно посетил этот населенный пункт.
Библиотека Natasha [5], позволяющая решать базовые задачи обработки естественного языка на русском языке, помогает выполнять синтаксический анализ текста, присваивая словам предложения id, head_id (связь с другим словом в предложении) и rel – часть речи в аннотации Universal Dependencies, что позволит выявить связь между словами (Рисунок 2). 
 
![Img syntax natasha](/img/img2.png)
Рисунок 2 – синтаксический разбор предложения библиотекой Natasha

Из примера на рисунке 2 видно, что слово «Андрей» связано с глаголом «вернулся», также как и «Москва». Просмотрев разбор библиотекой Natasha других предложений в текстах, можно выявить закономерность, при которой связанные имена героев и посещаемые ими города можно вывезти из текста. К примеру группа словосочетаний в предложении на рисунке 2: [advcl - > nsubj & advcl - > obl & obl -> case]. Если слово с частью речи advcl есть в предложении, то проверяются части речи nsubj и obl, а дальше и case. Получив положительный результат, можно выбрать имя и город из предложения и записать их в маршрут. 

Код алгоритма, реализующий проверку всех этих выведенных синтаксических структур, представляет собой класс SyntaxParse, которому поступает предложение, разбитое на токены с помощью библиотеки Natasha. Метод класса phrases создает массив, элементы которого связаны с токеном полученного предложения и представляют собой массив из синтаксически связанных с ним других токенов предложения. Потом предложение проверяется с каждым правилом, пока не найдет нужного. Результатом будет связанные сущности. Описание класса можно посомтреть в репозитории гитхаб https://github.com/DiaLyu/test_project/blob/master/back/analyzeBook/syntaxParse.py, а его применение https://github.com/DiaLyu/test_project/blob/master/back/analyzeBook/analyze.py. 

Но так как многие слова могут быть разными частями речи и могут совпасть с какими-то из правил, поэтому после синтаксической обработки полученные результаты дополнительно проверяются. 

## Анализ описанных алгоритмов

Метод с онтологиями [1] очень похож на алгоритм с применением библиотеки Natasha. Только в первом случае необходимо проработка всех предложений, что требует составления большой выборки. Плюсом является высокая точность. Но, тогда как [1] больше подходит к работе с одной предметной областью, то с Natasha диапазон работы расширяется.

Как пишут авторы работы [2], алгоритм показал плохую работу с контекстом, но способствует выделению дополнительной информации и оказался хорош в выявлении поверхностных форм в предложении при меньшей скорости работы. Поэтому это уступает в точности алгоритму автора данной статьи.

Денотатные графы из работ [3] и [4] хорошо использовать для генерации текстов. Плюсом идет, что есть возможность рассматривать связанные с денотатом другие элементы по всему тексту. Но в алгоритмах есть проблемы с корректным вычленением имен денотатов и извлечении только одного отношения, поэтому это позволяет сказать, что алгоритм с Natasha работает с денотатными графами наравне.

В работе [5] алгоритм оказывается намного лучше предыдущих, если дело касается русскоязычных текстов, так как при анализе учитываются больше грамматических особенностей, что делает понимание контекста алгоритмом лучше.

## Заключение

В процессе выполнения работы был выполнен обзор алгоритмов по выявлению связей между сущностями. Предложен новый на основе библиотеки Natasha. Проведен их сравнительный анализ.
 
## Библиографический список
1.	Ермаков А.Е. Автоматизация онтологического инжиниринга в системах извлечения знаний из текста // Компьютерная лингвистика и интеллектуальные технологии: труды Международной конференции Диалог’2008. URL: http://www.rco.ru/wp-content/uploads/2015/04/onthologies.pdf (дата обращения: 28.05.2023).
2.	Пантелеев М.Ф., Самарёв Р.С. Алгоритм связывания именованных сущностей // Машиностроение и компьютерные технологии. 2017. №7. URL: https://cyberleninka.ru/article/n/algoritm-svyazyvaniya-imenovannyh-suschnostey (дата обращения: 28.05.2023)
3. Денотативная модель основного содержания текста в лингвистическом обеспечении робототехнических исследований / Д. С. Курушин, О. В. Соболева, Д. С.Вяткин  Информационная структура текста : сб. ст. / Рос. акад. наук, Ин-т науч. информации по обществ. наукам Рос. акад. наук. - Москва : Амирит, 2018. - С. 104-112. - (Сер. Теория и история языкознания).
4. О возможном подходе к автоматическому построению денотатного графа гипертекста / Д. С. Курушин, Е. Р. Леонов, О. В. Соболева // Информационная структура текста : сб. ст. / Рос. акад. наук, Ин-т науч. информации по обществ. наукам Рос. акад. наук. - Москва : Амирит, 2018. - С. 113-118. - (Сер. Теория и история языкознания)
5.	Дмитриев А.С., Соловьев И.С., Орлова Ю.А., Розалиев В.Л., Константинов В.М. ИДЕНТИФИКАЦИЯ ВЗАИМОСВЯЗЕЙ МЕЖДУ ТЕРМИНАМИ И ОБЪЕКТАМИ ЭКОНОМИЧЕСКОЙ ТЕМАТИКИ В ТЕКСТЕ НА ЕСТЕСТВЕННОМ ЯЗЫКЕ // Прикаспийский журнал: управление и высокие технологии. 2015. №4 (32). URL: https://cyberleninka.ru/article/n/identifikatsiya-vzaimosvyazey-mezhdu-terminami-i-obektami-ekonomicheskoy-tematiki-v-tekste-na-estestvennom-yazyke (дата обращения: 28.05.2023)
6.	Проект Natasha. Набор качественных открытых инструментов для обработки естественного русского языка (NLP). - URL: https://habr.com/ru/post/516098/ (дата обращения: 28.05.2023)
